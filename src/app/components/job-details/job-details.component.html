<section class="job-hero-section">
<div class="header-content">
<div class="main-logo">
<img src="assets/images/logo_jobconnect.png" alt="Logo JobConnect">
</div>

<i class="fas fa-bars menu-toggle" (click)="toggleMenu()"></i>

<nav class="main-nav" [class.open]="isMenuOpen">
<ul>
  <li><a routerLink="/" class="nav-link">Accueil</a></li>
  <li><a routerLink="/job-list" class="nav-link">Emplois</a></li>
  <li><a routerLink="/recruiters" class="nav-link">Recruteurs</a></li>
  <li><a routerLink="/about" class="nav-link">À Propos</a></li>
  <li><a routerLink="/contact" class="nav-link">Contact</a></li>
</ul>
<div class="auth-buttons">
  <button class="btn btn-transparent">Se Connecter</button>
  <button class="btn btn-primary">S'inscrire</button>
</div>
</nav>
</div>
<h1 class="job-hero-title">Détails Emplois</h1>
</section>

<section class="job-details-header-section"> 
  <div class="job-details-content-wrapper">
    <div class="job-details-meta-top-row">
      <span class="time-ago">{{ job?.datePosted | date:'short' }}</span>
      <i class="far fa-bookmark favorite-icon"></i>
    </div>

    <div class="job-details-main-info">
      <div class="company-logo-wrapper">
        <img [src]="job?.companyLogoUrl || 'assets/images/default-logo.png'" alt="Logo Entreprise">
      </div>
      <div class="job-text-block">
        <h2 class="job-title-display">{{ job?.title }}</h2>
        <p class="company-name-display">{{ job?.recruiterCompanyName }}</p>
      </div>
    </div>

    <div class="job-details-meta-bottom-row">
      <span class="meta-item"><i class="fas fa-suitcase"></i> {{ job?.categoryName }}</span>
      <span class="meta-item"><i class="far fa-clock"></i> {{ job?.employmentType }}</span>
      <span class="meta-item"><i class="fas fa-dollar-sign"></i> {{ job?.pay }}</span>
      <span class="meta-item"><i class="fas fa-map-marker-alt"></i> {{ job?.location}}</span>
      <button class="btn btn-apply-job" (click)="openApplyPopup()">Postuler à l'emploi</button>
    </div>
  </div>
</section>


<section class="job-content-section">

<div class="job-content-container">
<div class="job-main-column">
<div class="job-description-block">
  <h3>Description de l'emploi</h3>
  <p>
    Nunc sed a nisi purus. Nibh dis faucibus proin lacus tristique. Sit congue non vitae odio sit erat in.
    Felis eu ultrices a sed massa. At eu lobortis pretium tincidunt amet amet lacus ut aenean aliquet.
    Blandit a massa elementum eu scelerisque cursus fames mauris. Tortor amet porta proin in.
    Orci imperdiet nisi dignissim pellentesque morbi vitae. Quisque tincidunt mattis lectus porta
    vitae cras ornare. Facilisis dignissim augue lorem amet adipiscing cursus fames mauris. Tortor amet
    porta proin in. Orci imperdiet nisi dignissim pellentesque morbi vitae. Quisque tincidunt
    mattis lectus porta vitae cras ornare. Facilisis dignissim augue lorem amet adipiscing cursus fames mauris.
    Diam habitant donec.
  </p>
  <p>
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut
    labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco
    laboris nisi ut aliquip ex ea commodo consequat.
  </p>
</div>

<div class="job-responsibilities-block">
  <h3>Responsabilités Clés</h3>
  <ul>
    <li><i class="fas fa-check"></i> Et nunc ut tempus duis nisl sed massa. Ornare varius faucibus nisi vitae vitae cras ornare. Cras facilisis dignissim augue lorem amet adipiscing cursus fames mauris. Tortor amet porta proin in.</li>
    <li><i class="fas fa-check"></i> Ornare varius faucibus nisi vitae vitae cras ornare. Cras facilisis dignissim augue lorem amet adipiscing cursus fames mauris. Tortor amet porta proin in. Orci imperdiet nisi dignissim pellentesque morbi vitae. Quique tincidunt mattis lectus porta vitae cras ornare.</li>
    <li><i class="fas fa-check"></i> Tortor amet porta proin in. Orci imperdiet nisi dignissim pellentesque morbi vitae. Quisque tincidunt mattis lectus porta vitae cras ornare.</li>
    <li><i class="fas fa-check"></i> Tortor amet porta proin in. Orci imperdiet nisi dignissim pellentesque morbi vitae. Quisque tincidunt mattis lectus porta vitae cras ornare.</li>
    <li><i class="fas fa-check"></i> Tortor amet porta proin in. Orci imperdiet nisi dignissim pellentesque morbi vitae. Quisque tincidunt mattis lectus porta vitae cras ornare.</li>
  </ul>
</div>

<div class="job-skills-block">
  <h3>Compétences Professionnelles</h3>
  <ul>
    <li><i class="fas fa-check"></i> Et nunc ut tempus duis nisl sed massa. Ornare varius faucibus nisi vitae vitae cras ornare.</li>
    <li><i class="fas fa-check"></i> Ornare varius faucibus nisi vitae vitae cras ornare.</li>
    <li><i class="fas fa-check"></i> Tortor amet porta proin in. Orci imperdiet nisi dignissim pellentesque morbi vitae.</li>
    <li><i class="fas fa-check"></i> Tortor amet porta proin in. Orci imperdiet nisi dignissim pellentesque morbi vitae.</li>
    <li><i class="fas fa-check"></i> Tortor amet porta proin in. Orci imperdiet nisi dignissim pellentesque morbi vitae.</li>
  </ul>
</div>

<div class="job-tags-block">
  <h3>Tags</h3>
  <div class="tags-container">
    <span class="tag-item">Temps Plein</span>
    <span class="tag-item">Commerce</span>
    <span class="tag-item">New-York</span>
    <span class="tag-item">Entreprise</span>
    <span class="tag-item">Localisation</span>
  </div>
</div>

<div class="job-share-block">
  <h4>Partager l'emploi:</h4>
  <div class="share-icons">
    <a href="#" class="share-icon"><i class="fab fa-facebook-f"></i></a>
    <a href="#" class="share-icon"><i class="fab fa-twitter"></i></a>
    <a href="#" class="share-icon"><i class="fab fa-linkedin-in"></i></a>
  </div>
</div>

<div class="related-jobs-block">
  <h3>Emplois Similaires</h3>
  <p class="section-description">At eu lobortis pretium tincidunt amet lacus ut aenean aliquet.</p>
  <div class="related-jobs-list">
    <div class="job-card-related" *ngFor="let job of similarJobs">
      <div class="job-card-related-header">
        <span class="time-ago-related">{{ job.timeAgo || 'Il y a quelque temps' }}</span>
        <i class="far fa-bookmark favorite-icon-related"></i>
      </div>
      <div class="job-card-related-main-info">
        <div class="company-logo-related">
          <img [src]="job.companyLogoUrl || 'assets/images/default_logo.png'" alt="Logo Entreprise">
        </div>
        <div class="job-text-related">
          <h4 class="job-title-related">{{ job.title }}</h4>
          <p class="company-name-related">{{ job.recruiterCompanyName }}</p>
        </div>
      </div>
      <div class="job-card-related-meta-row">
        <div class="meta-items-related">
          <span class="meta-item-related"><i class="fas fa-suitcase"></i> {{ job.categoryName }}</span>
          <span class="meta-item-related"><i class="far fa-clock"></i> {{ job.jobType }}</span>
          <span class="meta-item-related"><i class="fas fa-dollar-sign"></i> {{ job.pay | currency:'XOF':'symbol':'1.0-0' }}</span>
          <span class="meta-item-related"><i class="fas fa-map-marker-alt"></i> {{ job.location }}</span>
        </div>
        <button class="btn btn-details-related" (click)="goToJobDetails(job.id.toString())">Détails de l'emploi</button>
      </div>
    </div>
  </div>
</div>
</div>

<div class="job-overview-block">
  <h3>Aperçu de l'emploi</h3>
  <div class="overview-item">
    <span class="item-label"><i class="fas fa-suitcase"></i> Titre de l'emploi</span>
    <span class="item-value">{{ job?.title }}</span>
  </div>
  <div class="overview-item">
    <span class="item-label"><i class="fas fa-building"></i> Type d'emploi</span>
    <span class="item-value">{{ job?.employmentType }}</span>
  </div>
  <div class="overview-item">
    <span class="item-label"><i class="fas fa-tag"></i> Catégorie</span>
    <span class="item-value">{{ job?.categoryName }}</span>
  </div>
  <div class="overview-item">
    <span class="item-label"><i class="fas fa-graduation-cap"></i> Expérience</span>
    <span class="item-value">{{ job?.yearExperience }}</span>
  </div>
  <div class="overview-item">
    <span class="item-label"><i class="fas fa-book"></i> Diplôme</span>
    <span class="item-value">{{ job?.requirements }}</span>
  </div>
  <div class="overview-item">
    <span class="item-label"><i class="fas fa-money-bill-wave"></i> Salaire Offert</span>
    <span class="item-value">{{ job?.pay }}</span>
  </div>
  <div class="overview-item">
    <span class="item-label"><i class="fas fa-map-marker-alt"></i> Emplacement</span>
    <span class="item-value">{{ job?.location }}</span>
  </div>
  <div class="map-placeholder">
    <iframe
      [src]="'https://www.google.com/maps?q=' + job?.location + '&output=embed'"
      width="100%"
      height="250"
      style="border:0;"
      allowfullscreen=""
      loading="lazy">
    </iframe>
  </div>
</div>


</div>
 <div class="apply-popup-overlay" *ngIf="showApplyPopup">
  <div class="apply-popup">
    <div class="popup-header">
      <h3>Postuler à l'emploi</h3>
      <i class="fas fa-times" (click)="closeApplyPopup()"></i>
    </div>
    <form class="apply-form" (ngSubmit)="submitApplication()" #applicationForm="ngForm" novalidate>
      <div class="form-row">
        <div class="form-group">
          <label for="fullName"><i class="fas fa-user icon"></i> Nom Complet *</label>
          <input
            type="text"
            id="fullName"
            [(ngModel)]="application.fullName"
            name="fullName"
            placeholder="Votre nom complet"
            required
            #fullName="ngModel"
          />
          <div *ngIf="fullName.invalid && fullName.touched" class="error-msg">
            Le nom complet est obligatoire.
          </div>
        </div>
        <div class="form-group">
          <label for="email"><i class="fas fa-envelope icon"></i> Email *</label>
          <input
            type="email"
            id="email"
            [(ngModel)]="application.email"
            name="email"
            placeholder="Votre adresse email"
            required
            email
            #email="ngModel"
          />
          <div *ngIf="email.invalid && email.touched" class="error-msg">
            Veuillez entrer un email valide.
          </div>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="phoneNumber"><i class="fas fa-phone icon"></i> Téléphone *</label>
          <input
            type="tel"
            id="phoneNumber"
            [(ngModel)]="application.phoneNumber"
            name="phoneNumber"
            placeholder="Votre numéro de téléphone"
            required
            #phoneNumber="ngModel"
          />
          <div *ngIf="phoneNumber.invalid && phoneNumber.touched" class="error-msg">
            Le numéro de téléphone est obligatoire.
          </div>
        </div>
        <div class="form-group">
          <label for="country"><i class="fas fa-globe icon"></i> Pays *</label>
          <input
            type="text"
            id="country"
            [(ngModel)]="application.country"
            name="country"
            placeholder="Votre pays de résidence"
            required
            #country="ngModel"
          />
          <div *ngIf="country.invalid && country.touched" class="error-msg">
            Le pays est obligatoire.
          </div>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group full-width">
          <label for="city"><i class="fas fa-city icon"></i> Ville *</label>
          <input
            type="text"
            id="city"
            [(ngModel)]="application.city"
            name="city"
            placeholder="Votre ville de résidence"
            required
            #city="ngModel"
          />
          <div *ngIf="city.invalid && city.touched" class="error-msg">
            La ville est obligatoire.
          </div>
        </div>
      </div>

      <div class="form-group">
        <label for="cvFile"><i class="fas fa-upload icon"></i> CV (PDF uniquement) *</label>
        <input
          type="file"
          id="cvFile"
          (change)="onFileSelected($event)"
          accept=".pdf"
          required
        />
        <span class="file-name" *ngIf="selectedFile">{{ selectedFile.name }}</span>
      </div>

      <div class="form-actions">
        <button type="button" class="btn btn-cancel" (click)="closeApplyPopup()">Annuler</button>
        <button
          type="submit"
          class="btn btn-submit"
          [disabled]="
            applicationForm.invalid || !selectedFile || selectedFile.type !== 'application/pdf'">
          <i class="fas fa-paper-plane"></i> Envoyer ma candidature</button>
      </div>
    </form>
  </div>
</div>


</section> 